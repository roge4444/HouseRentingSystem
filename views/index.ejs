<!DOCTYPE html>
<html>
  <head>
  	<meta charset="utf-8">
    <title><%= title %></title>
    <link rel='stylesheet' href='/stylesheets/style.css' />
    <script src="/socket.io/socket.io.js"></script>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
  
  </head>
  <body>
  <div class="form">
    <h1><%= title %></h1>
    <p>Welcome to <%= title %></p>
    <font size=3>My Account: <b><h2 id="id"></h2></b></font><br>
    <font size=3>My Ether: <b><h2 id="coin"></h2></b></font><br><br>
    
    <font size=3>My Account2: <b><h2 id="id2"></h2></b></font><br>
    <font size=3>My Ether2: <b><h2 id="coin2"></h2></b></font>
 
 	<h3>帳戶登入</h3>
	<input id="whoami" type="text" placeholder="請輸入您的位址">
	<button id="whoamiButton">登入</button>
	<hr>
	<h3>帳戶狀態</h3>
	<h5 id="ethBalance">以太帳戶餘額 (wei): </h5>
	<h5 id="bankBalance">銀行合約餘額 (wei): </h5>
	<hr>
	<h3>存款</h3>
	<input id="deposit" type="number" placeholder="請輸入存款額度 (ether)">
	<button id="depositButton">執行</button>
	<hr>
	<h3>提款</h3>
	<input id="withdraw" type="number" placeholder="請輸入提款額度 (ether)">
	<button id="withdrawButton">執行</button>
	<hr>
	<h3>轉帳</h3>
	<input id="transferTo" type="text" placeholder="請輸入轉帳對象">
	<input id="transferEtherValue" type="number" placeholder="請輸入轉帳額度 (ether)">
	<button id="transferButton">執行</button>
	<hr>
	<h3>活動紀錄</h3>
	<pre id="logger"></pre>
	<script src="./js/jquery.min.js"></script>
	<script src="./js/index.js"></script>
 
 	
    
    <SCRIPT language="JavaScript">
    	/*function abc_abc()
    	{
    		document.getElementById('coin').value += "AACCCCASDASD";
    	}
    	function hi_and_bye()
    {
    	document.getElementById('coin').value = "ADADAD";
    }*/
    
    
     var socket = io.connect('http://140.119.134.210:3000');
     
     socket.on('index', function(data) {
            //$('#coin').text(data.coin);
            $('#id').text(data.id);
            countUp($('#coin'),data.coin,0,500,11);
            $('#id2').text(data.id2);
            countUp($('#coin2'),data.coin2,0,500,11);
     });
     
     function countUp(elem, endVal, startVal, duration, decimal) {  
	    var startTime = 0;
	    var dec = Math.pow(10, decimal);
	    var progress,value;
	    function startCount(timestamp) {
	        if(!startTime) startTime = timestamp;
	        progress = timestamp - startTime;
	        value = startVal + (endVal - startVal) * (progress / duration);
	        value = (value > endVal) ? endVal : value;
	        value = Math.floor(value*dec) / dec;
	        elem.text(value.toFixed(decimal));
	        progress < duration && requestAnimationFrame(startCount)
	    }
	    requestAnimationFrame(startCount)
	}
	
	socket.on('disconnect',function(){
    
	});
	     
    
    
    	
   </SCRIPT>
    
  </body>
</html>
